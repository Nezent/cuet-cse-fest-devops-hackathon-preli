FROM node:20

WORKDIR /app

# Copy and install all dependencies (including devDeps)
COPY package*.json ./
RUN npm install

# Copy TypeScript config and source
COPY tsconfig.json ./
COPY src ./src

# Expose backend port
EXPOSE 3847

# Run in development mode using ts-node-dev for live reload
CMD ["npm", "run", "dev"]
